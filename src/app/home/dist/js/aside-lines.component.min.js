"use strict";var __decorate=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;0<=a;a--)(s=e[a])&&(r=(n<3?s(r):3<n?s(t,i,r):s(t,i))||r);return 3<n&&r&&Object.defineProperty(t,i,r),r};exports.__esModule=!0,exports.AsideLinesComponent=void 0;var core_1=require("@angular/core"),forms_1=require("@angular/forms"),operators_1=require("rxjs/operators"),AsideLinesComponent=function(){function e(e){this.arrivals=e,this.lines=new Array,this.lineIsLoading=!1,this.lineHasNextPage=!1,this.lineTotalDocs=0,this.regex=new forms_1.FormControl("",[forms_1.Validators.required]),this.params={page:1},this.showSlide=!1,this.selected=new core_1.EventEmitter}return e.prototype.ngOnInit=function(){this.getLines(),this.viewRegex()},e.prototype.getLines=function(){var o=this;this.lineIsLoading=!0,this.arrivals.getLines(this.params).subscribe({next:function(e){var t=e.data,i=e.metadata;o.lines=o.lines.concat(t),o.lineHasNextPage=i.hasNextPage,o.lineTotalDocs=i.totalDocs,o.lineIsLoading=!1},error:function(e){o.lineIsLoading=!1}})},e.prototype.isIdentifier=function(e){return 0<e.length&&e.length<7&&e.split("").every(function(e){return e===e.toUpperCase()})},e.prototype.viewRegex=function(){var t=this;this.regex.valueChanges.pipe(operators_1.debounceTime(500),operators_1.distinctUntilChanged()).subscribe(function(e){delete t.params.identifier,delete t.params.name,t.params.page=1,t.regex.valid&&(t.isIdentifier(e)?t.params.identifier=e.trim():t.params.name=e.trim()),t.lines=new Array,t.getLines()})},e.prototype.onScroll=function(e){var t=e.target,i=t.scrollHeight-t.clientHeight;.9<t.scrollTop/i&&!this.lineIsLoading&&this.lineHasNextPage&&(++this.params.page,this.getLines())},e.prototype.onAll=function(){this.selected.emit(null)},e.prototype.onSelected=function(e){this.selected.emit(e)},e.prototype.toogleSlide=function(){this.showSlide=!this.showSlide},__decorate([core_1.HostBinding("class.hide_aside")],e.prototype,"showSlide"),__decorate([core_1.Output()],e.prototype,"selected"),e=__decorate([core_1.Component({selector:"aside-lines",templateUrl:"./aside-lines.component.html",styleUrls:["./aside-lines.component.scss"]})],e)}();exports.AsideLinesComponent=AsideLinesComponent;