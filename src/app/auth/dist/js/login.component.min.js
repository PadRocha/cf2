"use strict";var __decorate=this&&this.__decorate||function(e,r,t,o){var n,s=arguments.length,i=s<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var u=e.length-1;0<=u;u--)(n=e[u])&&(i=(s<3?n(i):3<s?n(r,t,i):n(r,t))||i);return 3<s&&i&&Object.defineProperty(r,t,i),i};exports.__esModule=!0,exports.LoginComponent=void 0;var core_1=require("@angular/core"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),functions_1=require("@shared/functions"),operators_1=require("rxjs/operators"),LoginComponent=function(){function e(e,r){this.user=e,this.router=r,this.userData=new forms_1.FormGroup({nickname:new forms_1.FormControl("",forms_1.Validators.required),password:new forms_1.FormControl("",forms_1.Validators.required)})}return e.prototype.ngOnInit=function(){this.getPreviousUrl()},e.prototype.ngOnDestroy=function(){this.router.events.subscribe()},e.prototype.getPreviousUrl=function(){this.router.events.pipe(operators_1.filter(function(e){return e instanceof router_1.RoutesRecognized})).subscribe(function(e){})},e.prototype.onSubmit=function(){var t=this;this.userData.valid&&this.user.loginUser(this.userData.getRawValue()).subscribe({next:function(e){var r=e.token;t.user.setToken(r),t.user.update(),t.router.navigate(["/home"])},error:function(e){functions_1.Alert.fire({title:"Access Denied",text:"Server error",icon:"error"})}})},e=__decorate([core_1.Component({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.scss"]})],e)}();exports.LoginComponent=LoginComponent;